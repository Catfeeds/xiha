(function(e,A){var j={ctype:ctype,stype:stype};var w=1;var c=1;var f=localStorage.getItem("page_"+ctype+"_"+stype)?localStorage.getItem("page_"+ctype+"_"+stype):1;f=f==0?1:f;f=isNaN(f)?1:f;var p=localStorage.getItem("errq_"+ctype+"_"+stype)?JSON.parse(localStorage.getItem("errq_"+ctype+"_"+stype)):[];var g=localStorage.getItem("trueq_"+ctype+"_"+stype)?JSON.parse(localStorage.getItem("trueq_"+ctype+"_"+stype)):[];var z=localStorage.getItem("colle")?JSON.parse(localStorage.getItem("colle")):[];var k=[];var m=n(ctype,stype);if(m==false||m.length==0){e.toast("网络错误，请检查网络");location.href=root_path+"exam/index-"+sid+".html";return false}localStorage.setItem("qtotal",m.length);var v=y(f,w,m);var u=v.join(",");var d=localStorage.getItem("question_list")?JSON.parse(localStorage.getItem("question_list")):[];localStorage.setItem("page_"+ctype+"_"+stype,f);s(u);d=JSON.parse(localStorage.getItem("question_list"));d.page=f;d.qtotal=m.length;A.getElementById("qtotal").innerHTML=m.length;A.getElementById("qid").innerHTML=f;o(d,"question","question_temp");var r=A.getElementById("prev");var t=A.getElementById("next");r.addEventListener("tap",function(){k.length=0;A.getElementById("showexplain").style.display="none";var D=localStorage.getItem("page_"+ctype+"_"+stype);D--;if(D==0){this.style.color="#999";return false}localStorage.setItem("page_"+ctype+"_"+stype,D);var C=y(D,w,m);var E=C.join(",");var B=localStorage.getItem("question_list")?JSON.parse(localStorage.getItem("question_list")):[];s(E);B=JSON.parse(localStorage.getItem("question_list"));localStorage.setItem("curr_qid_"+ctype+"_"+stype,B.question_list[0]["id"]);B.page=D;B.qtotal=m.length;A.getElementById("qtotal").innerHTML=m.length;A.getElementById("qid").innerHTML=D;o(B,"question","question_temp")});t.addEventListener("tap",function(){k.length=0;A.getElementById("showexplain").style.display="none";var D=localStorage.getItem("page_"+ctype+"_"+stype);D++;if(D>m.length){this.style.color="#999";return false}localStorage.setItem("page_"+ctype+"_"+stype,D);var C=y(D,w,m);var E=C.join(",");var B=localStorage.getItem("question_list")?JSON.parse(localStorage.getItem("question_list")):[];s(E);B=JSON.parse(localStorage.getItem("question_list"));localStorage.setItem("curr_qid_"+ctype+"_"+stype,B.question_list[0]["id"]);B.page=D;B.qtotal=m.length;A.getElementById("qtotal").innerHTML=m.length;A.getElementById("qid").innerHTML=D;o(B,"question","question_temp")});var i=A.getElementById("questions_no_list");i.addEventListener("tap",function(){var F=n(ctype,stype);var D=localStorage.getItem("errq_"+ctype+"_"+stype)?JSON.parse(localStorage.getItem("errq_"+ctype+"_"+stype)):[];var H=localStorage.getItem("trueq_"+ctype+"_"+stype)?JSON.parse(localStorage.getItem("trueq_"+ctype+"_"+stype)):[];var C=localStorage.getItem("qtotal")?parseInt(localStorage.getItem("qtotal")):0;var E=localStorage.getItem("curr_qid_"+ctype+"_"+stype);var B="<div style='width:100%; text-align:center; margin:0px; padding:0px;' id='choosequestion'>";e.each(F,function(J,I){if(E==I.id){F[J]["status"]="2"}else{F[J]["status"]="1"}if(-1!=D.indexOf(parseInt(I.id))){F[J]["status"]="4"}if(-1!=H.indexOf(parseInt(I.id))){F[J]["status"]="3"}});e.each(F,function(J,I){switch(I.status){case"1":B+='<a data-id="'+I.id+'" class="choosequestion" style="">'+(J+1)+"</a>";break;case"2":B+='<a data-id="'+I.id+'" class="choosequestion" style="background:#666; border-color:#666;">'+(J+1)+"</a>";break;case"3":B+='<a data-id="'+I.id+'" class="choosequestion" style="background:#18B4ED; border-color:#18B4ED;">'+(J+1)+"</a>";break;case"4":B+='<a data-id="'+I.id+'" class="choosequestion" style="background:#F25E5E; border-color:#F25E5E;">'+(J+1)+"</a>";break;default:B+='<a data-id="'+I.id+'" class="choosequestion" style="">'+(J+1)+"</a>";break}});var G='<span class="dadui" style="color:#555;">正确：<b id="dadui_num" style="color:#18b4ed;">'+H.length+'</b> </span>&nbsp;&nbsp;<span class="dacuo">错误：<b id="dacuo_num" style="color:#f25e5e;">'+D.length+'</b></span>&nbsp;&nbsp;<span class="weida" style="color:#555;">待答：<b id="weida_num" style="color:#999">'+(C-D.length-H.length)+"</b></span>";B+="</div>";layer.open({type:1,content:B,anim:0.2,title:G,style:"position:fixed; bottom:0; left:0; width:100%; height:400px; overflow-y:scroll; border:none;"});e("#choosequestion").on("tap",".choosequestion",function(M){k.length=0;var I=A.getElementById("showexplain");I.style.display="none";var J=this.getAttribute("data-id");var L=this.innerText;layer.closeAll();localStorage.setItem("curr_qid_"+ctype+"_"+stype,J);localStorage.setItem("page_"+ctype+"_"+stype,L);s(this.getAttribute("data-id"));var K=JSON.parse(localStorage.getItem("question_list"));K.page=L;K.qtotal=m.length;A.getElementById("qtotal").innerHTML=m.length;A.getElementById("qid").innerHTML=L;o(K,"question","question_temp")})});var b=A.getElementById("cacheall");b.addEventListener("tap",function(){var C=x(m);var B=layer.open({content:'<p style="color:#333; line-height:30px; font-size:1rem;">一键缓存题库，做题速度更快，体验更好！只需耗费较少的手机流量，你确定需要吗？</p>',btn:["我要缓存",'<a style="color:#999;">不要</a>'],yes:function(D){this.innerText="拼命缓存中";this.disabled=true;layer.open({content:"缓存成功",time:2});a(ctype,stype);layer.close(D)}})});e("#question").on("tap",".mui-ul-click .mui-single",function(){var C=localStorage.getItem("question_list")?JSON.parse(localStorage.getItem("question_list")):"";if(typeof C!="object"||C==""||C==false||C.question_list.length==0){location.reload();return false}var B=C.question_list[0]["answertrue"];var E=C.question_list[0]["id"];var D=this.getAttribute("title");if(-1!=k.indexOf("checked")){return false}e.each(this.parentNode.querySelectorAll("li"),function(G,F){if(F.getAttribute("title")==D){k.push("checked")}else{k.push("unchecked")}});if(D==B){if(this.querySelector("span").className=="xuanze_no"){this.querySelector(".xuanze_no").innerHTML="&#xe639;";this.querySelector(".xuanze_no").style.fontSize="2.1rem";this.querySelector(".xuanze_no").className="iconfont";this.style.color="#18b4ed";h(p,g,E,"2",ctype,stype)}else{this.disabled=true}}else{e.each(this.parentNode.querySelectorAll("li"),function(G,F){if(F.getAttribute("title")==B){if(this.querySelector("span").className=="xuanze_no"){this.querySelector(".xuanze_no").innerHTML="&#xe639;";this.querySelector(".xuanze_no").style.fontSize="2.1rem";this.querySelector(".xuanze_no").className="iconfont";this.style.color="#18b4ed"}else{this.disabled=true}}else{this.disabled=true}});if(this.querySelector("span").className=="xuanze_no"){this.querySelector(".xuanze_no").innerHTML="&#xe63a;";this.querySelector(".xuanze_no").style.fontSize="2.1rem";this.querySelector(".xuanze_no").className="iconfont";this.style.color="#f25e5e";h(p,g,E,"1",ctype,stype)}else{this.disabled=true}}A.getElementById("showexplain").style.display="block";A.getElementById("explain").innerHTML='<span style="font-weight:bold; display:block; margin-top:10px; ">试题详解：</span><br />'+C.question_list[0]["explain"];A.getElementById("explain").style.color="#8e734d"});e("#question").on("tap",".mui-ul-click .mui-multi",function(){var D=A.getElementById("exam-btn");var C=[];if(this.querySelector("span").className!="iconfont"){var B=this.querySelector(".xuanze_no").getAttribute("data-id")?this.querySelector(".xuanze_no").getAttribute("data-id"):1;if(B==1){this.querySelector(".xuanze_no").className+=" xuanze_checked";this.querySelector(".xuanze_no").setAttribute("data-id","2")}else{this.querySelector(".xuanze_no").className="xuanze_no";this.querySelector(".xuanze_no").setAttribute("data-id",1)}e.each(this.parentNode.querySelectorAll(".xuanze_no"),function(E){if(this.getAttribute("data-id")){C.push(this.getAttribute("data-id"))}})}if(C.length>1){D.style.backgroundColor="#18b4ed";D.disabled=false;return false}if(-1==C.indexOf("2")){D.style.backgroundColor="#999";D.disabled=true;return false}D.addEventListener("tap",function(){this.parentNode.removeChild(D);var G=[];var F=localStorage.getItem("question_list")?JSON.parse(localStorage.getItem("question_list")):"";if(typeof F!="object"||F==""||F==false||F.question_list.length==0){location.reload();return false}var E=F.question_list[0]["answertrue"];var I=F.question_list[0]["id"];e.each(document.querySelectorAll(".xuanze_no"),function(J){if(this.getAttribute("data-id")==2){G.push(this.parentNode.getAttribute("title"))}});if(G.length==1){layer.open({content:"这是一道多选题，请至少选择2个答案！",time:2});return false}var H=G.join("");if(E==H){h(p,g,I,"2",ctype,stype)}else{h(p,g,I,"1",ctype,stype)}e.each(document.querySelectorAll(".xuanze_no"),function(J){if(E==H){if(-1!=E.indexOf(this.parentNode.getAttribute("title"))){this.innerHTML="&#xe639;";this.style.fontSize="2.1rem";this.className="iconfont";this.style.color="#18b4ed"}}else{if(-1!=E.indexOf(this.parentNode.getAttribute("title"))){this.innerHTML="&#xe639;";this.style.fontSize="2.1rem";this.className="iconfont";this.style.color="#18b4ed"}else{this.innerHTML="&#xe63a;";this.style.fontSize="2.1rem";this.className="iconfont";this.style.color="#f25e5e"}}});A.getElementById("showexplain").style.display="block";A.getElementById("explain").innerHTML='<span style="font-weight:bold; display:block; margin-top:10px; ">试题详解：</span><br />'+F.question_list[0]["explain"];A.getElementById("explain").style.color="#8e734d"})});var q=A.getElementById("collection");q.addEventListener("tap",function(){var D=localStorage.getItem("colle")?JSON.parse(localStorage.getItem("colle")):[];var B=localStorage.getItem("question_list")?JSON.parse(localStorage.getItem("question_list")):[];var C=B.question_list[0]["id"];if(-1==D.indexOf(parseInt(C))){D.push(C)}localStorage.setItem("colle",JSON.stringify(D));this.style.color="#ea8010";this.querySelector(".iconfont").innerHTML="&#xe635;"});function h(C,F,G,E,D,B){if(typeof C!="object"||typeof F!="object"){return false}switch(E){case"1":if(-1==C.indexOf(parseInt(G))){C.push(G)}if(-1!=F.indexOf(parseInt(G))){F.remove(G)}break;case"2":if(-1==F.indexOf(parseInt(G))){F.push(G)}if(-1!=C.indexOf(parseInt(G))){C.remove(G)}break;default:return false;break}localStorage.setItem("errq_"+D+"_"+B,JSON.stringify(C));localStorage.setItem("trueq_"+D+"_"+B,JSON.stringify(F));return true}function s(E){var F={question_ids:E};var B=localStorage.getItem("all_question_list")?JSON.parse(localStorage.getItem("all_question_list")):[];var D=l(B,E);if(D.length!=0&&typeof D=="object"&&D!=false){var C={question_list:D};localStorage.setItem("question_list",JSON.stringify(C));return false}else{e.ajax({type:"post",url:host+"/v2/exam/question_list.php",async:false,dataType:"json",data:F,success:function(H){if(200==H.code){var G=H.data;localStorage.setItem("question_list",JSON.stringify(G))}else{e.toast(H.data);localStorage.setItem("question_list","");return false}},error:function(){localStorage.setItem("question_list","");e.toast("网络错误，请检查网络");return false}})}}function l(D,F){if(typeof D!="object"||D==null||D.length==0){return false}var G=F.split(",");var E=[];for(var C=0;C<D.question_list.length;C++){for(var B=0;B<G.length;B++){if(D.question_list[C]["id"]==G[B]){E.push(D.question_list[C])}}}return E}function a(C,B){var D={ctype:C,stype:B};e.ajax({type:"post",url:host+"v2/exam/cache_question.php",data:D,async:false,dataType:"json",success:function(E){b.innerText="一键缓存";b.disabled=false;if(E.code==200){localStorage.setItem("all_question_list",JSON.stringify(E.data))}else{e.toast(E.data);localStorage.setItem("all_question_list","");return false}},error:function(E){localStorage.setItem("all_question_list","");return false}});d=localStorage.getItem("all_question_list");if(d!=null){return JSON.parse(d)}return false}function y(F,C,B){if(typeof B!="object"||B.length==0){return false}var G=(F-1)*C;var E=[];for(var D=G;D<C*F;D++){E.push(B[D]["id"])}return E}function o(E,B,I){var H=A.getElementById("collection");if(typeof E!="object"){return false}var G=localStorage.getItem("colle")?JSON.parse(localStorage.getItem("colle")):[];var F=localStorage.getItem("curr_qid_"+ctype+"_"+stype)?localStorage.getItem("curr_qid_"+ctype+"_"+stype):0;if(G.indexOf(parseInt(F))!=-1){H.style.color="#ea8010";H.querySelector(".iconfont").innerHTML="&#xe635;"}else{H.style.color="#5c5c5c";H.querySelector(".iconfont").innerHTML="&#xe636;"}var C=A.getElementById(I).innerHTML;var D=juicer(C,E);A.getElementById(B).innerHTML=D}function x(B){if(typeof B!="object"||B.length==0){return false}var D=[];for(var C=0;C<B.length;C++){D.push(B[C]["id"])}return D}function n(D,C){if(typeof D!="string"||typeof C!="string"){return false}if(["C1","A1","A2","D"].indexOf(D)==-1){return false}if(["1","4"].indexOf(C)==-1){return false}var B=localStorage.getItem("sequence_id_"+D+"_"+C);if(B!=null){return JSON.parse(B)}else{var E={ctype:D,stype:C};e.ajax({type:"post",url:host+"v2/exam/sequence.php",data:E,async:false,dataType:"json",success:function(F){if(F.code==200){localStorage.setItem("sequence_id_"+D+"_"+C,JSON.stringify(F.data.question_ids))}else{return false}},error:function(F){return false}})}B=localStorage.getItem("sequence_id_"+D+"_"+C);if(B!=null){return JSON.parse(B)}return false}Array.prototype.remove=function(C){var B=this.indexOf(C);if(B>-1){this.splice(B,1)}}})(mui,document);